TIMER0		EQU   	0600H 
TIMER1 	EQU   	0602H 
TIMER2		EQU   	0604H 
TIMERM	EQU   	0606H 
P8255A	    EQU  	0640H
P8255B		EQU  	0642H
P8255C		EQU  	0644H
P8255M		EQU  	0646H
DATA 	SEGMENT 
DISCODE	DB	 3FH,06H,5BH,4FH,66H,6DH,7DH,07H		;0--7的显示代码
			DB	 7FH,6FH,77H,7CH,39H,5EH,79H,71H		;8--F的显示代码
INDEX		DB	 00H,00H,00H,00H,00H,00H,0CCH,0CCH
DYNBUFF	DB      00H,00H,00H,00H,00H,00H,00H,00H 	;动态显示缓冲
LOCATN		DB      00H,00H,00H,00H,00H,00H,00H,00H 	;动态显示位置控制
HOUR		DB		12			;小时
MINUTE		DB		34			;分钟
SECOND	DB		50			;秒			
COUNT		DB		100
DATA 	ENDS

SSTACK 	SEGMENT STACK  ;? by 徐春秋,常玻
DW 	    32 DUP(?) 
SSTACK 	ENDS
CODE	SEGMENT 
	ASSUME CS:CODE,SS:SSTACK,DS:DATA
START: 	MOV 	AX,DATA
	    MOV 	DS,AX 	
	    MOV 	DX,P8255M 	 ;方式选择控制字
	    MOV 	AL,10000000B	
	    OUT 	DX,AL		 ;写入方式选择控制字
AA1: 	CALL 	DISPLY
		CALL 	DISPLY2
		JMP 	AA1
;------------------------------
SWITCH		PROC  		NEAR				; 
		PUSH		AX
		PUSH		DX
K0:		NOP 
K1:		NOP
K2:		NOP
K3:		NOP
K4:		NOP
K5:		NOP				
		POP		DX
       	POP		AX
       	RET
SWITCH		ENDP
LEDLAMP		PROC  		NEAR				; 
		PUSH		AX
		PUSH		DX
		NOP
		POP		DX
       	POP		AX
       		RET
LEDLAMP	ENDP
DISPLY		PROC  		NEAR				; 
		PUSH		AX
		PUSH		DX
		MOV 	DX,P8255B
		MOV 	AL,11111110B
		OUT 	DX,AL
		MOV 	DX,P8255A
		MOV 	AL,5BH
		OUT 	DX,AL
		POP	DX
       	POP	AX
       	RET
DISPLY 	ENDP

DISPLY2		PROC  		NEAR				; 
		PUSH		AX
		PUSH		DX
		MOV 	DX,P8255B
		MOV 	AL,11111101B
		OUT 	DX,AL
		MOV 	DX,P8255A
		MOV 	AL,06H
		OUT 	DX,AL
		POP	DX
       	POP	AX
       	RET
DISPLY2 	ENDP

DISPLY3		PROC  		NEAR				; 
		PUSH		AX
		PUSH		DX
		MOV 	DX,P8255B
		MOV 	AL,11111011B
		OUT 	DX,AL
		MOV 	DX,P8255A
		MOV 	AL,06H
		OUT 	DX,AL
		POP	DX
       	POP	AX
       	RET
DISPLY3 	ENDP

CODE 	ENDS 
	    END 	START
