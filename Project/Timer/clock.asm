A 	EQU 0640H
B 	EQU 0642H
C 	EQU 0644H
CTR EQU 0646H

DATA SEGMENT
ONE 	DB 06H
TWO 	DB 05BH
THREE 	DB 4FH
FOUR	DB 66H
FIVE	DB 06DH
SIX		DB 07DH
SEVEN	DB 07H
EIGHT	DB 07FH
NINE	DB 06FH
ZERO	DB 03FH
DATA ENDS

SSTACK SEGMENT STACK
DW 32 DUP(?)
SSTACK ENDS

CODE SEGMENT
ASSUME CS:CODE
START:	
		MOV AX,OFFSET DATA
		MOV DS,AX

		MOV DX,CTR			
		MOV AL,80H		;初始化8255:ABC方式0，输出
		OUT DX,AL

;-----------------------------------------------------------		
		LEA SI,ONE
		MOV CX,0009H
		
NEXT:	
		PUSH CX
		MOV CX,05FFH
		L:		
		MOV DX,B
		MOV AL,0FFH		;b全部关
		OUT DX,AL

		MOV DX,A
		MOV AL,[SI]
		OUT DX,AL

		MOV DX,B
		MOV AL,0FEH
		OUT DX,AL
		
		MOV DX,B
		MOV AL,0FFH		;b全部关
		OUT DX,AL
		
		MOV DX,A
		MOV AL,ZERO
		OUT DX,AL
		
		MOV DX,B
		MOV AL,01H
		OUT DX,AL
		
		MOV DX,B
		MOV AL,0FFH		;b全部关
		OUT DX,AL
		
		LOOP L
		POP CX
		INC SI
		LOOP NEXT
		
		LEA SI,ONE
		MOV CX,0009H
		LOOP NEXT
;-----------------------------------------------------------
	
DONE: 	JMP DONE	
DELAY	PROC
		PUSH SI
		PUSH CX
		MOV SI,00FFH
D11:	MOV CX,00FFH
D22:	LOOP D22
		DEC SI
		JNZ D11					;延时结束
		POP CX
		POP SI
		RET
DELAY ENDP
CODE ENDS
END START